(function(t){function e(e){for(var o,n,i=e[0],c=e[1],l=e[2],p=0,d=[];p<i.length;p++)n=i[p],s[n]&&d.push(s[n][0]),s[n]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(o=!1)}o&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},s={app:0},r=[];function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/neargreen-v2/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"022e":function(t,e,a){},"034f":function(t,e,a){"use strict";var o=a("64a9"),s=a.n(o);s.a},"07be":function(t,e,a){t.exports=a.p+"static/img/neargreenlogo.a7aba8b6.png"},"0875":function(t,e,a){"use strict";var o=a("4188"),s=a.n(o);s.a},1050:function(t,e,a){},"209f":function(t,e,a){"use strict";var o=a("74f9"),s=a.n(o);s.a},"216e":function(t,e,a){},"35a8":function(t,e,a){"use strict";var o=a("022e"),s=a.n(o);s.a},4188:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("app-header",{on:{triggerZoomToLocation:t.zoomToLocation}}),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"map-container"},[a("app-map",{attrs:{location:t.location}})],1)])],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-default",attrs:{role:"navigation"}},[a("div",{staticClass:"container-fluid"},[t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"bs-example-navbar-collapse-1"}},[a("form",{staticClass:"navbar-form navbar-left",attrs:{role:"search"}},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter an Address"},domProps:{value:t.searchValue},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.submitSearch(e))},input:function(e){e.target.composing||(t.searchValue=e.target.value)}}})])]),"success"!==t.status?a("ul",{staticClass:"nav navbar-nav navbar-right"},[a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"},on:{click:function(e){t.showRegisterModal=!0}}},[a("b",[t._v("Register")]),a("span",{staticClass:"caret"})])]),a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"},on:{click:function(e){t.showLoginModal=!0}}},[a("b",[t._v("Login")]),a("span",{staticClass:"caret"})])])]):a("ul",{staticClass:"nav navbar-nav navbar-right"},[a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"/profile","data-toggle":"dropdown"}},[a("b",[t._v("Logged in as "+t._s(t.user.username))]),a("span",{staticClass:"caret"})])]),a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"},on:{click:t.logout}},[a("b",[t._v("Logout")]),a("span",{staticClass:"caret"})])])])])])]),t.showRegisterModal?a("div",[a("transition",{attrs:{name:"modal"}},[t.showRegisterModal?a("app-register",{on:{close:function(e){t.showRegisterModal=!1}}}):t._e()],1)],1):t._e(),t.showLoginModal?a("div",[a("transition",{attrs:{name:"modal"}},[t.showLoginModal?a("app-login",{on:{close:function(e){t.showLoginModal=!1}}}):t._e()],1)],1):t._e()])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"navbar-header"},[o("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[o("img",{attrs:{id:"neargreenLogo",src:a("07be"),alt:""}})])])}],c=(a("386d"),a("2f62")),l=a("c6e0"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Register")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"},on:{click:function(e){return t.$emit("close")}}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"username"}},[t._v("Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",id:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"password"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password1,expression:"password1"}],staticClass:"form-control",attrs:{type:"password",id:"password"},domProps:{value:t.password1},on:{input:function(e){e.target.composing||(t.password1=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"password-confirm"}},[t._v("Confirm Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"form-control",attrs:{type:"password",id:"password-confirm"},domProps:{value:t.password2},on:{input:function(e){e.target.composing||(t.password2=e.target.value)}}})])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v("Close")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.register(t.username,t.password1,t.password2,t.email),t.$emit("close")}}},[t._v("Register")])])])])])])},p=[],d={name:"Register",data:function(){return{username:"",password1:"",password2:"",email:""}},methods:{register:function(t,e,a,o){var s={username:t,password1:e,password2:a,email:o};this.$store.dispatch("auth/register",s)}}},m=d,f=(a("35a8"),a("2877")),h=Object(f["a"])(m,u,p,!1,null,"74871c88",null),v=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Login")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"},on:{click:function(e){return t.$emit("close")}}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"username"}},[t._v("Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"password"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v("Close")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.login(t.username,t.password),t.$emit("close")}}},[t._v("Login")])])])])])])},b=[],w={name:"Login",data:function(){return{username:"",password:""}},methods:{login:function(t,e){var a={username:t,password:e};this.$store.dispatch("auth/login",a)}}},C=w,y=(a("209f"),Object(f["a"])(C,g,b,!1,null,"38cd9a59",null)),k=y.exports,_=new l["OpenStreetMapProvider"]({params:{city:"Philadelphia",state:"PA",limit:1}}),S={data:function(){return{showRegisterModal:!1,showLoginModal:!1,searchValue:""}},computed:Object(c["b"])({status:function(t){return t.auth.status},user:function(t){return t.auth.user}}),methods:{logout:function(){this.$store.dispatch("auth/logout")},submitSearch:function(){var t=this;_.search({query:this.searchValue}).then(function(e){t.$emit("triggerZoomToLocation",[e[0].y,e[0].x])})}},components:{appRegister:v,appLogin:k}},x=S,M=(a("0875"),Object(f["a"])(x,n,i,!1,null,"04f1597c",null)),L=M.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mapwrap"},[a("div",{staticClass:"results-container"},[a("app-sidebar",{on:{zoomToLocation:t.zoomToLocation}})],1),a("div",{attrs:{id:"map"}})])},O=[],T=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{open:t.showSidebar},attrs:{id:"toolbar"}},[a("div",{staticClass:"hamburger",on:{click:function(e){t.showSidebar=!t.showSidebar}}},[a("span",[t._v("Nearby Stores")])]),a("div",{attrs:{id:"stores"}},t._l(t.stores,function(e,o){return a("div",{key:o},[a("app-store",{attrs:{store:e},on:{triggerZoomToStore:t.zoomToStore}})],1)}),0)])}),R=[],$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row store-row",on:{click:function(e){return t.$emit("triggerZoomToStore",t.store.location.coordinates)}}},[a("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},[a("div",{staticClass:"panel panel-primary"},[a("div",{staticClass:"row padall"},[a("div",{staticClass:"col-xs-12 col-sm-12 col-md-9 col-lg-9"},[a("div",[a("h5",[a("strong",[a("em",[a("span",[t._v(t._s(t.store.name))])])])]),a("h5",[a("div",{staticClass:"store-details"},[a("span",[t._v(t._s(t.store.address))]),a("br"),a("span",[t._v("\n                  "+t._s(t.store.distance)+"\n                  "),t.store.distance<=1?a("span",{staticClass:"inline"},[t._v("Mile")]):a("span",{staticClass:"inline"},[t._v("Miles")])])])])])])])])])])},P=[],z={name:"Store",props:["store"]},N=z,E=(a("8a3a"),Object(f["a"])(N,$,P,!1,null,"6dc4eaa9",null)),I=E.exports,V={data:function(){return{showSidebar:!1}},computed:Object(c["b"])({stores:function(t){return t.stores.stores}}),methods:{zoomToStore:function(t){this.$emit("zoomToLocation",t)}},components:{appStore:I}},A=V,J=(a("6d4c"),Object(f["a"])(A,T,R,!1,null,null,null)),D=J.exports,Y=a("e11e"),B=a("d329"),U=Y["icon"]({iconUrl:B,iconSize:[32,37],iconAnchor:[16,37],popupAnchor:[0,-28]}),W={name:"Map",props:["location"],components:{appSidebar:D},data:function(){return{locationMarker:null,map:null,storeLayer:null}},computed:Object(c["b"])({stores:function(t){return t.stores.stores}}),mounted:function(){this.map=this.initMap(),this.addBasemaps(),this.placeLocationMarker(),this.placeStoreMarkers()},methods:{initMap:function(){var t=Y["map"]("map",{zoomControl:!1}).setView(this.location,18);return Y["control"].zoom({position:"bottomright"}).addTo(t),t},addBasemaps:function(){var t=Y["tileLayer"]("https://api.mapbox.com/styles/v1/mapbox/streets-v10/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGJkMjgxIiwiYSI6ImNqcThtdnR2MDAwdWMzeG1qdW00Y2wwMTcifQ.al7JyXv2B7kpvwgNNb49Bg",{attribution:'© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>'}),e=Y["tileLayer"]("https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NDg1bDA1cjYzM280NHJ5NzlvNDMifQ.d6e-nNyBDtmQCVwVNivz7A#2/0/0",{attribution:'© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>'});this.map.addLayer(t),Y["control"].layers({Streets:t,Light:e}).addTo(this.map)},placeStoreMarkers:function(){null!==this.storeLayer&&this.map.removeLayer(this.storeLayer);var t=this.stores.map(function(t){var e="<p>".concat(t.name,"<br/>").concat(t.address,"</p>"),a=Y["marker"]([t.location.coordinates[1],t.location.coordinates[0]],{icon:U}).bindPopup(e);return a});this.storeLayer=Y["layerGroup"](t),this.map.addLayer(this.storeLayer)},placeLocationMarker:function(){null!==this.locationMarker&&this.map.removeLayer(this.locationMarker),this.locationMarker=Y["marker"](this.location).addTo(this.map),this.map.panTo(this.location)},zoomToLocation:function(t){this.map.setView([t[1],t[0]],20)}},watch:{location:function(){this.placeLocationMarker()},stores:function(){this.placeStoreMarkers()}}},Z=W,q=(a("96bf"),Object(f["a"])(Z,j,O,!1,null,"f493cbc6",null)),F=q.exports,G={components:{appHeader:L,appMap:F},data:function(){return{location:[39.9523893,-75.1636291]}},created:function(){this.getLocation()},mounted:function(){this.getStores()},methods:{zoomToLocation:function(t){this.location=t},getLocation:function(){var t=this;navigator.geolocation.getCurrentPosition(function(e){t.location=[e.coords.latitude,e.coords.longitude]})},getStores:function(){this.$store.dispatch("stores/getStores",{latitude:this.location[0],longitude:this.location[1]})}},watch:{location:function(){this.getStores()}}},Q=G,X=(a("034f"),Object(f["a"])(Q,s,r,!1,null,null,null)),H=X.exports,K=(a("96cf"),a("3b8d")),tt=a("bc3a"),et=a.n(tt),at=a("a78e"),ot=a.n(at),st=et.a.create({baseURL:"http://ec2-34-230-37-205.compute-1.amazonaws.com/api",timeout:5e3,headers:{"Content-Type":"application/json","X-CSRFToken":ot.a.get("csrftoken")}}),rt={fetchStores:function(t){return st.get("stores/",{params:t}).then(function(t){return t.data.results})}},nt={stores:[]},it={stores:function(t){return t.stores}},ct={getStores:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(e,a){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:o=e.commit,rt.fetchStores(a).then(function(t){o("setStores",t)});case 2:case"end":return t.stop()}},t)}));function e(e,a){return t.apply(this,arguments)}return e}()},lt={setStores:function(t,e){t.stores=e}},ut={namespaced:!0,state:nt,getters:it,actions:ct,mutations:lt},pt=et.a.create({baseURL:"http://ec2-34-230-37-205.compute-1.amazonaws.com/api",timeout:5e3,headers:{"Content-Type":"application/json","X-CSRFToken":ot.a.get("csrftoken"),Authorization:"JWT ".concat(localStorage.getItem("token"))}}),dt={register:function(t){return st.post("register/",t).then(function(t){return t.data}).catch(function(t){return console.log(t)})},login:function(t){return st.post("auth/login/",t).then(function(t){return t.data}).catch(function(t){return console.log(t)})},logout:function(){return pt.post("auth/logout/").then(function(t){return t.data}).catch(function(t){return console.log(t)})}},mt=a("f654"),ft={status:"",token:localStorage.getItem("token")||"",user:{}},ht={register:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(e,a){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:o=e.commit,dt.register(a).then(function(t){o("authSuccess",{token:t.token,user:t.user})}).catch(function(t){o("authError"),Object(mt["reject"])(t)});case 2:case"end":return t.stop()}},t)}));function e(e,a){return t.apply(this,arguments)}return e}(),login:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(e,a){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:o=e.commit,dt.login(a).then(function(t){o("authSuccess",{token:t.token,user:t.user})}).catch(function(t){o("authError"),Object(mt["reject"])(t)});case 2:case"end":return t.stop()}},t)}));function e(e,a){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(K["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,dt.logout().then(function(){return a("logout")}).catch(function(t){a("authError"),Object(mt["reject"])(t)});case 2:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},vt={authSuccess:function(t,e){localStorage.setItem("token",e.token),t.status="success",t.token=e.token,t.user=e.user},authError:function(t){localStorage.removeItem("token"),t.status="error"},logout:function(t){localStorage.removeItem("token"),t.status="",t.token="",t.user={}}},gt={namespaced:!0,state:ft,actions:ht,mutations:vt};o["a"].use(c["a"]);var bt=new c["a"].Store({modules:{stores:ut,auth:gt}});o["a"].config.productionTip=!1;var wt=new o["a"]({store:bt,render:function(t){return t(H)}});wt.$mount("#app")},"64a9":function(t,e,a){},"6d4c":function(t,e,a){"use strict";var o=a("c2b9"),s=a.n(o);s.a},"74f9":function(t,e,a){},"8a3a":function(t,e,a){"use strict";var o=a("216e"),s=a.n(o);s.a},"96bf":function(t,e,a){"use strict";var o=a("1050"),s=a.n(o);s.a},c2b9:function(t,e,a){},d329:function(t,e,a){t.exports=a.p+"static/img/leaf.113e65e9.png"}});
//# sourceMappingURL=app.55108189.js.map